version: "3.1"
slots:
  # === 切换用户 ===
  user_id: # 用户ID
    type: text
    initial_value: "1001" # 设置初始值
    mappings:
      - type: from_llm
  # === 查询订单 ===
  goto:
    type: text
    mappings:
      - type: controlled

  order_id: # 订单ID
    type: text
    mappings:
      - type: controlled # 从action中获取值


  # === 修改订单 ===
  receive_id: # 收货信息ID
    type: text
    mappings:
      - type: controlled

  modify_content: # 要修改的内容
    type: text

  receiver_name: # 收货人姓名
    type: text
    mappings:
      - type: from_llm

  receiver_phone: # 收货人电话
    type: text
    mappings:
      - type: from_llm

  receive_province: # 收货省
    type: text
    mappings:
      - type: controlled

  receive_city: # 收货市
    type: text
    mappings:
      - type: controlled

  receive_district: # 收货区
    type: text
    mappings:
      - type: controlled

  receive_street_address: # 收货街道地址
    type: text
    mappings:
      - type: from_llm

  if_modify_continue: # 是否继续修改
    type: bool

  set_receive_info: # 是否设置收货信息
    type: bool
    mappings:
      - type: controlled
  # === 取消订单 ===
  if_cancel_order: # 是否取消订单
    type: bool

responses:
  utter_ask_user_id:
    - text: "请输入用户ID："
  # === 修改订单 ===
  utter_ask_modify_content:
    - text: "请选择要修改的内容"
      buttons:
        - title: "收货人姓名"
          payload: "/SetSlots(modify_content=收货人姓名)"
        - title: "收货人电话"
          payload: "/SetSlots(modify_content=收货人电话)"
        - title: "收货地址"
          payload: "/SetSlots(modify_content=收货地址)"
        - title: "取消"
          payload: "/SetSlots(modify_content=false)"

  utter_ask_receiver_name:
    - text: "请输入收货人姓名"

  utter_ask_receiver_phone:
    - text: "请输入收货人电话"

  utter_ask_receive_street_address:
    - text: "请输入收货街道地址"

  utter_ask_if_modify_continue:
    - text: "是否继续修改其他信息？"
      buttons:
        - title: "是"
          payload: "/SetSlots(if_modify_continue=true)"
        - title: "否"
          payload: "/SetSlots(if_modify_continue=false)"
  # === 取消订单 ===
  utter_ask_if_cancel_order:
    - text: "是否取消此订单？"
      buttons:
        - title: "是"
          payload: "/SetSlots(if_cancel_order=true)"
        - title: "否"
          payload: "/SetSlots(if_cancel_order=false)" 
actions:
  # === 查询订单 ===
  - action_ask_order_id # 询问要查询的订单
  - action_get_order_detail # 获取订单详情
  # === 修改订单 ===
  - action_ask_receive_id # 询问重新选择现有的收货信息，或修改并新建收货信息
  - action_ask_receive_province # 询问收货省
  - action_ask_receive_city # 询问收货市
  - action_ask_receive_district # 询问收货区
  - action_ask_set_receive_info # 询问确认修改收货信息
  # === 取消订单 ===
  - action_cancel_order # 取消订单